cameras:
    camera1:
        type: isometric

lights:
    light1:
        type: directional
        direction: [0, 1, -.5]
        diffuse: .5
        ambient: .5
    light2:
        type: point
        position: [0, 0, 100]
        origin: ground
        ambient: .3
        diffuse: .3

styles:
    buildings:
        extends: polygons
        animated: true
        texcoords: true
        # material:
        #     normal:
        #         texture: ./material/rock.jpg
        #         mapping: uv
        #     ambient: 1.0
        #     diffuse: 1.0
        shaders:
            blocks:
                globals: |
                    float getBrightness(in vec3 _rgb){
                        return 0.212655 * _rgb.r + 0.715158 * _rgb.g + 0.072187 * _rgb.b;
                    }
                normals: |

                color: | 
                    color.rgb = normal*.5+.5;
                    //color.rgb = vec3(0.5+getBrightness(v_color.rgb)*0.5);
                filter: | 
                    if (v_color.rgb == vec3(0.0)){
                        color.rgb = vec3(.0);
                    } else {
                        //color.rgb = vec3(1.);
                        //color.rgb = vec3(0.5+getBrightness(v_color.rgb)*0.5);
                    }

sources:
    osm:
        type: GeoJSONTileSource
        url:  http://vector.mapzen.com/osm/all/{z}/{x}/{y}.json

layers:
    earth:
        data:
            source: osm
            layer: earth
        style:
            order: 0
            color: '#ddeeee'
    landuse:
        data:
            source: osm
            layer: landuse
        style:
            order: 1
            color: '#aaffaa'
            interactive: true

    water:
        data:
            source: osm
            layer: water
        style:
            order: 2
            color: '#88bbee'

    roads:
        data:
            source: osm
            layer: roads
        style:
            order: 3
            color: gray    
            width: 8
        highway:
            filter:
                kind: highway
            style:
                color: '#cc6666'
                width: 12
                outline:
                    color: grey
                    width: 3
        tunnel:
            filter:
                is_tunnel: yes
            style:
                color: tan
            rail:
                filter:
                    kind: rail
                style:
                    width: 0
        minor_road:
            filter:
                kind: minor_road
            style:
                color: lightgrey
                width: 5
        path:
            filter:
                kind: path
            style:
                color: [0.8, 0.8, 0.8]
                width: 3
        rail:
            filter:
                kind: rail
                is_tunnel: no
            style:
                color: pink
                width: 3
    buildings:
        data:
            source: osm
            layer: buildings
        style:
            name: buildings
            order: 4
            color: Style.color.pseudoRandomColor()
            outline:
                color: [0, 0, 0]
                width: 0.5
                tile_edges: true
            extrude: true

